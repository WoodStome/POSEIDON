<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Carte protégée POSEIDON</title>
<style>
  body { font-family: sans-serif; text-align: center; padding: 2rem; }
</style>
<script>
// Au chargement, rediriger si un code valide est déjà enregistré
(function() {
  var code = localStorage.getItem('poseidon-code');
  if (code && /^\d{6}$/.test(code)) {
    var num = parseInt(code, 10);
    if (num >= 0 && num <= 666666) {
      window.location.href = 'https://umap.openstreetmap.fr/fr/map/poseidon_1261549';
    }
  }
})();
</script>
</head>
<body>
<img
  src="https://i.postimg.cc/Vv8kBTGf/rondache-poseidon.jpg"
  alt="Rondache POSEIDON"
  style="max-width:200px; margin-bottom:1rem;"
>
<h1>Accès à la carte POSEIDON</h1>
<p>Veuillez entrer votre NIGEND.</p>
<input type="text" id="access-code" maxlength="6" />
<button type="button" onclick="validateCode()">Valider</button>
<p id="error" style="color: red;"></p>
<script>
function validateCode() {
  var code = document.getElementById('access-code').value.trim();
  if (!/^\d{6}$/.test(code)) {
    document.getElementById('error').textContent = 'Veuillez entrer votre NIGEND.';
    return;
  }
  var num = parseInt(code, 10);
  if (num < 0 || num > 666666) {
    document.getElementById('error').textContent = 'NIGEND invalide.';
    return;
  }
  // Stocker le code et rediriger
  localStorage.setItem('poseidon-code', code);
  window.location.href = 'https://umap.openstreetmap.fr/fr/map/poseidon_1261549';
}
</script>
</body>
</html>
